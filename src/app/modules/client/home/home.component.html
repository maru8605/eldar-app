<app-menu></app-menu>

<div class="p-grid p-fluid container">
  <div class="flex justify-content-end p-col-12" *ngIf="rol === 'admin'">
    <p-button label="Nuevo post" (click)="createNewPost()" icon="pi pi-plus-circle"/>
  </div>

  <div class="p-col-12">
    <div class="p-inputgroup group">
      <input 
        type="text" 
        pInputText 
        [(ngModel)]="searchTerm" 
        (input)="updatePaginatedData()" 
        placeholder="Buscar post por título" 
        
        
      />
      <p-button 
        (click)="restoreData()" 
        icon="pi pi-refresh" 
        styleClass="ml-3"
       
      />
    </div>
  </div>
  
  <div class="p-col-12 table-container">
    <p-table [value]="paginatedData">
      <ng-template pTemplate="header">
        <tr>
          <th>Título</th>
          <th>Descripción</th>
          <th>Acciones</th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-post>
        <tr>
          <td>{{ post.title }}</td>
          <td>{{ post.body.substring(0, 10) }}...</td>
          <td>
            <p-button 
              (click)="ver(post)" 
              severity="info" 
              icon="pi pi-eye" 
              styleClass="mr-2 mb-1" 
              pTooltip="Ver post" 
              tooltipPosition="left" 
              class="margin-botton"
            />
            <p-button *ngIf="rol === 'admin'"
              (click)="editar(post)" 
              icon="pi pi-file-edit" 
              pTooltip="Editar post" 
              tooltipPosition="right" 
              styleClass="mr-2 mb-1" 
            />
          </td>
        </tr>
      </ng-template>
    </p-table>

    <p-paginator 
      [rows]="rows" 
      [totalRecords]="totalRecords" 
      [pageLinkSize]="3" 
      (onPageChange)="onPageChange($event)">
    </p-paginator>
  </div>
</div>

<p-dialog 
    header="Header" 
    [(visible)]="visible" 
    [modal]="true" 
    [style]="{ width: '25rem' }">
        <ng-template pTemplate="header">
            <div class="inline-flex align-items-center justify-content-center gap-2">
                
                <span class="font-bold white-space-nowrap">
                    Amy Elsner
                </span>
            </div>
        </ng-template>
        <span class="p-text-secondary block mb-5">Update your information.</span>
        <div class="flex align-items-center gap-3 mb-3">
            <label for="username" class="font-semibold w-6rem">
                Username
            </label>
            <input pInputText id="username" class="flex-auto" autocomplete="off" />
        </div>
        <div class="flex align-items-center gap-3 mb-5">
            <label for="email" class="font-semibold w-6rem">Email</label>
            <input pInputText id="email" class="flex-auto" autocomplete="off" />
        </div>
        <ng-template pTemplate="footer">
            <p-button 
                label="Cancel" 
                [text]="true" 
                severity="secondary" 
                (onClick)="visible = false" />
            <p-button 
                label="Save" 
                [outlined]="true" 
                severity="secondary" 
                (onClick)="visible = false" 
              />
        </ng-template>
</p-dialog>
